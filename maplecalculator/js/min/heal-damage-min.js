window.onload=function(){document.getElementById("calculate").addEventListener("click",function(){calculate()}),document.getElementById("reset").addEventListener("click",function(){resetValues()}),$(".js-monster-data-array").select2({data:undeadlist})};var calculate=function(){var yourlevel=document.getElementById("yourlevel"),totalint=document.getElementById("totalint"),totalluk=document.getElementById("totalluk"),totalmagic=document.getElementById("totalmagic"),heallevel=document.getElementById("heallevel"),monstername=monsterlist[monster.value].text,monstermdef=eval(monsterlist[monster.value].mdef),monsterlevel=eval(monsterlist[monster.value].level),avgdmgundead=document.getElementById("avgdmgundead"),avgdmgunholy=document.getElementById("avgdmgunholy"),mindmgundead=document.getElementById("mindmgundead"),mindmgunholy=document.getElementById("mindmgunholy"),maxdmgundead=document.getElementById("maxdmgundead"),maxdmgunholy=document.getElementById("maxdmgunholy");if(yourlevel.value)if(totalint.value)if(totalluk.value)if(totalmagic.value){var d=monsterlevel-yourlevel.value;0>d&&(d=0);var mobamount=[1,38/48,.6875,.625,28/48];mobamount=mobamount[amount.value];var mindmg=(1.2*totalint.value+4*totalluk.value)*totalmagic.value/1e3*heallevel.value*mobamount-.6*monstermdef*(1+.01*d),maxdmg=(4.8*totalint.value+4*totalluk.value)*totalmagic.value/1e3*heallevel.value*mobamount-.5*monstermdef*(1+.01*d),avgdmg=(maxdmg+mindmg)/2;result.innerHTML="<b>"+monstername+"</b> is a level <b>"+monsterlevel+"</b> monster, and has a total of <b>"+monstermdef+"</b> magical defense (mdef).",mindmgundead.value=Math.floor(mindmg),maxdmgundead.value=Math.floor(maxdmg),avgdmgundead.value=Math.floor(avgdmg),mindmgunholy.value=Math.floor(1.5*mindmg),maxdmgunholy.value=Math.floor(1.5*maxdmg),avgdmgunholy.value=Math.floor(1.5*avgdmg);for(var round=[maxdmgundead.value,maxdmgunholy.value,mindmgundead.value,mindmgunholy.value,avgdmgundead.value,avgdmgunholy.value],i=0;i<round.length;i++)round[i]>99999&&(round[i]=99999);for(var i=0;i<round.length;i++)round[i]<1&&(round[i]=1);maxdmgundead.value=round[0],maxdmgunholy.value=round[1],mindmgundead.value=round[2],mindmgunholy.value=round[3],avgdmgundead.value=round[4],avgdmgunholy.value=round[5]}else totalmagic.style.background="#FCC";else totalluk.style.background="#FCC";else totalint.style.background="#FCC";else yourlevel.style.background="#FCC"},resetValues=function(){totalint.value=0,totalint.style.background="#EEE",totalluk.value=0,totalluk.style.background="#EEE",totalmagic.value=0,totalmagic.style.background="#EEE",heallevel.value=30,amount.value=1,result.innerHTML="---",avgdmgunholy.value=0,avgdmgundead.value=0,mindmgunholy.value=0,mindmgundead.value=0,maxdmgunholy.value=0,maxdmgundead.value=0};