function calculateIt(){resetAll();var job=parseInt($("#jobselect").val()),def,damagetype=parseInt($("#damagetype").val()),m=parseInt($("#monster").val()),d=parseInt(monsterlist[m].level)-parseInt($("#level").val());if(0>d&&(d=0),0===job)console.log("nope");else if(1===job)$("#results").show(),def=monsterlist[m].wdef+"</b> weapon defense",$(".currentaccuracy").hide(),acc=parseInt($("#acc").val()),globalAccuracy(d,acc,m),$("#monsterdata").html("<b>"+monsterlist[m].text+"</b> is a level <b>"+monsterlist[m].level+"</b> monster with <b>"+monsterlist[m].hp+"</b> HP. It has <b>"+def+" and  <b>"+monsterlist[m].avoid+"</b> avoidabillity.");else if(2===job)$("#results").show(),def=monsterlist[m].wdef+"</b> weapon defense",$(".currentaccuracy").hide(),acc=parseInt($("#acc").val()),globalAccuracy(d,acc,m),$("#monsterdata").html("<b>"+monsterlist[m].text+"</b> is a level <b>"+monsterlist[m].level+"</b> monster with <b>"+monsterlist[m].hp+"</b> HP. It has <b>"+def+" and  <b>"+monsterlist[m].avoid+"</b> avoidabillity.");else if(3===job)$("#results").show(),def=monsterlist[m].wdef+"</b> weapon defense",$(".currentaccuracy").hide(),acc=parseInt($("#acc").val()),globalAccuracy(d,acc,m),$("#monsterdata").html("<b>"+monsterlist[m].text+"</b> is a level <b>"+monsterlist[m].level+"</b> monster with <b>"+monsterlist[m].hp+"</b> HP. It has <b>"+def+" and  <b>"+monsterlist[m].avoid+"</b> avoidabillity.");else if(4===job)$("#results").show(),def=monsterlist[m].wdef+"</b> weapon defense",$(".currentaccuracy").hide(),acc=parseInt($("#acc").val()),globalAccuracy(d,acc,m),$("#monsterdata").html("<b>"+monsterlist[m].text+"</b> is a level <b>"+monsterlist[m].level+"</b> monster with <b>"+monsterlist[m].hp+"</b> HP. It has <b>"+def+" and  <b>"+monsterlist[m].avoid+"</b> avoidabillity.");else if(5===job){$("#results").show(),def=monsterlist[m].mdef+"</b> magic defense",totalint=parseInt($("#int").val()),totalluk=parseInt($("#luk").val()),totalmagic=parseInt($("#totalmagic").val()),skillattack=parseInt($("#skillattack").val()),skillmastery=eval($("#skillmastery option:selected").val()),elementamp=eval($("#elementamp option:selected").val()),elemwandbonus=eval($("#elemwandbonus option:selected").val());var result1=totalmagic*totalmagic/1e3;result1+=totalmagic,result1/=30;var result2=totalint/200,maxresult=eval(result1)+eval(result2),result3=totalmagic*totalmagic/1e3,result4=totalmagic*skillmastery*.9;result3+=result4,result4=result3/30;var result5=totalint/200,minresult=eval(result4)+eval(result5);maxdmg=Math.floor(parseInt(maxresult*skillattack*elementamp*elemwandbonus)),mindmg=Math.floor(parseInt(minresult*skillattack*elementamp*elemwandbonus)),checkWeakness(damagetype,m),maxdmg-=.5*monsterlist[m].mdef*(1+.01*d),mindmg-=.6*monsterlist[m].mdef*(1+.01*d),avgdmg=Math.floor(parseInt((eval(maxdmg)+eval(mindmg))/2));for(var roundmatk=[mindmg,maxdmg,avgdmg],i=0;3>i;i++)roundmatk[i]>99999&&(roundmatk[i]=99999);for(var i=0;3>i;i++)roundmatk[i]<1&&(roundmatk[i]=1);$("#mindmg").html(Math.floor(roundmatk[0])),$("#maxdmg").html(Math.floor(roundmatk[1])),$("#avgdmg").html(Math.floor(roundmatk[2])),magicAccuracy(totalint,totalluk,m,d),$("#monsterdata").html("<b>"+monsterlist[m].text+"</b> is a level <b>"+monsterlist[m].level+"</b> monster with <b>"+monsterlist[m].hp+"</b> HP. It has <b>"+def+" and  <b>"+monsterlist[m].avoid+"</b> avoidabillity.")}else if(6===job){$("#results").show(),damagetype=4;var m=parseInt($("#unmonster").val()),d=parseInt(monsterlist[m].level)-parseInt($("#level").val());0>d&&(d=0),def=monsterlist[m].mdef+"</b> magic defense",totalint=parseInt($("#int").val()),totalluk=parseInt($("#luk").val()),totalmagic=parseInt($("#totalmagic").val()),heallevel=eval($("#heallevel option:selected").val()),monsteramount=eval($("#monsteramount option:selected").val());var mobamount=[1,38/48,.6875,.625,28/48];mobamount=mobamount[monsteramount];var mindmg=(1.2*totalint+4*totalluk)*totalmagic/1e3*heallevel*mobamount,maxdmg=(4.8*totalint+4*totalluk)*totalmagic/1e3*heallevel*mobamount;checkWeakness(damagetype,m),maxdmg-=.5*monsterlist[m].mdef*(1+.01*d),mindmg-=.6*monsterlist[m].mdef*(1+.01*d),avgdmg=Math.floor(parseInt((eval(maxdmg)+eval(mindmg))/2));for(var roundmatk=[mindmg,maxdmg,avgdmg],i=0;3>i;i++)roundmatk[i]>99999&&(roundmatk[i]=99999);for(var i=0;3>i;i++)roundmatk[i]<1&&(roundmatk[i]=1);$("#mindmg").html(Math.floor(roundmatk[0])),$("#maxdmg").html(Math.floor(roundmatk[1])),$("#avgdmg").html(Math.floor(roundmatk[2])),magicAccuracy(totalint,totalluk,m,d),$("#monsterdata").html("<b>"+monsterlist[m].text+"</b> is a level <b>"+monsterlist[m].level+"</b> monster with <b>"+monsterlist[m].hp+"</b> HP. It has <b>"+def+" and  <b>"+monsterlist[m].avoid+"</b> avoidabillity.")}else if(9===job){$("#hpresults").show();var currentlevel=parseInt($("#level").val());if(30>currentlevel)$(".30advice").show();else{$(".30advice").hide();var dataset=parseInt($("#dataset").val()),currenthp=parseInt($("#hp").val()),currentmp=parseInt($("#mp").val()),m=parseInt($("#hpclass").val()),targethp=parseInt($("#targethp").val()),targetlevel=parseInt($("#targetlevel").val()),minmp=function(e,a,t){return e*a+t};console.log(dataset);var hpdata,mpdata;switch(dataset){case 0:hpdata="minhp",mpdata="minmp";break;case 1:hpdata="hp",mpdata="mp";break;case 2:hpdata="maxhp",mpdata="maxmp";break;default:hpdata="hp",mpdata="mp"}var hpperap=parseInt(hpwashdata[m]["rawap"+hpdata]),mploss=parseInt(hpwashdata[m].mploss),hpperlevel=parseInt(hpwashdata[m]["rawlevel"+hpdata]),mpperlevel=parseInt(hpwashdata[m]["rawlevel"+mpdata]),advancementhp=parseInt(hpwashdata[m]["adv"+hpdata]),advancementmp=parseInt(hpwashdata[m]["adv"+mpdata]);console.log(mpperlevel),70>targetlevel?(advancementhp=0,advancementmp=0):120>targetlevel?currentlevel>70&&(advancementhp=0,advancementmp=0):currentlevel>120?(advancementhp=0,advancementmp=0):70>currentlevel&&(advancementhp*=2,advancementmp*=2);var requiredap=Math.ceil((targethp-currenthp-advancementhp-(targetlevel-currentlevel)*hpperlevel)/hpperap),currentminmp=minmp(currentlevel,hpwashdata[m].multi,hpwashdata[m].add)+advancementmp,farmedmp=currentmp-currentminmp,requiredresets=requiredap,requiredmp=requiredap*mploss,requiredtotalmp=minmp(targetlevel,hpwashdata[m].multi,hpwashdata[m].add)+requiredmp;console.log(requiredtotalmp),console.log(targetlevel),console.log(currentlevel),console.log(mpperlevel),console.log(advancementmp),console.log(currentmp);var requiredgain=requiredtotalmp-((targetlevel-currentlevel)*mpperlevel+advancementmp+currentmp),requiredint=requiredgain/(targetlevel-currentlevel)*10;requiredint>99?(requiredint=Math.ceil(requiredint/100),requiredint*=100):requiredint>9&&100>requiredint&&(requiredint=Math.ceil(requiredint/10),requiredint*=10),0>requiredgain&&(requiredgain="You do not require any more MP to reach this HP"),0>requiredint&&(requiredint="You do not require any more INT to reach this HP"),console.log("i live"),$("#currentminmp").html(currentminmp),$("#farmedmp").html(farmedmp),$("#requiredap").html(requiredap),$("#requiredresets").html(requiredresets),$("#requiredint").html(requiredint),$("#requiredmp").html(requiredmp),$("#requiredtotalmp").html(requiredtotalmp),$("#requiredgain").html(requiredgain)}}9!==job?generateAdvice(mindmg,avgdmg,m):generateHpWashing()}function magicAccuracy(e,a,t,m){var s=Math.floor(e/10)+Math.floor(a/10),l=Math.floor((monsterlist[t].avoid+1)*(1+.04*m)),r=Math.floor(.41*l),n=-.7011618132*Math.pow((s-r+1)/(l-r+1),2)+1.702139835*((s-r+1)/(l-r+1));n=Math.round(100*n),r>s?n=0:s>=l&&(n=100),$("#currentaccuracy").html(s),$("#maxaccuracy").html(l),$("#minaccuracy").html(r),$("#hitratio").html(n)}function globalAccuracy(e,a,t){var m=a/((1.84+.07*e)*monsterlist[t].avoid)-1;m=Math.round(100*m);var s=0,l=0;m>100?m=100:0>m?m=0:isNaN(m)&&(m=0);for(var r=1;100>s;r++){s=r/((1.84+.07*e)*monsterlist[t].avoid)-.05*(e-5),s=Math.round(100*s);var n=r}for(var r=1;1>l;r++){l=r/((1.84+.07*e)*monsterlist[t].avoid)-.05*(e-5),l=Math.round(100*l);var i=r}$("#maxaccuracy").html(n),$("#minaccuracy").html(i),$("#hitratio").html(m)}function checkWeakness(e,a){if(fire=-1!==monsterlist[a].elem.indexOf("F3")?"Weak":-1!==monsterlist[a].elem.indexOf("F2")?"Strong":-1!==monsterlist[a].elem.indexOf("F1")?"Immume":"None",$("#firevalue").html(fire),ice=-1!==monsterlist[a].elem.indexOf("I3")?"Weak":-1!==monsterlist[a].elem.indexOf("I2")?"Strong":-1!==monsterlist[a].elem.indexOf("I1")?"Immume":"None",$("#icevalue").html(ice),poison=-1!==monsterlist[a].elem.indexOf("S3")?"Weak":-1!==monsterlist[a].elem.indexOf("S2")?"Strong":-1!==monsterlist[a].elem.indexOf("S1")?"Immume":"None",$("#poisonvalue").html(poison),holy=-1!==monsterlist[a].elem.indexOf("H3")?"Weak":-1!==monsterlist[a].elem.indexOf("H2")?"Strong":-1!==monsterlist[a].elem.indexOf("H1")?"Immume":"None",$("#holyvalue").html(holy),lightning=-1!==monsterlist[a].elem.indexOf("L3")?"Weak":-1!==monsterlist[a].elem.indexOf("L2")?"Strong":-1!==monsterlist[a].elem.indexOf("L1")?"Immume":"None",$("#lightningvalue").html(lightning),0!==e){if(1==e)switch(fire){case"Weak":$("#elembonusdamage").html("This monster is weak versus your <b>fire</b> attack (150% damage)"),maxdmg*=1.5,mindmg*=1.5;break;case"Strong":$("#elembonusdamage").html("This monster is strong versus your <b>fire</b> attack (50% damage)"),maxdmg/=2,mindmg/=2;break;case"Immume":$("#elembonusdamage").html("This monster is immume versus your <b>fire</b> attack (1 damage only)"),maxdmg=1,mindmg=1;break;default:$("#elembonusdamage").html("This monster has nothing special versus your <b>fire</b> attack (100% damage)")}else if(2==e)switch(ice){case"Weak":$("#elembonusdamage").html("This monster is weak versus your <b>ice</b> attack (150% damage)"),maxdmg*=1.5,mindmg*=1.5;break;case"Strong":$("#elembonusdamage").html("This monster is strong versus your <b>ice</b> attack (50% damage)"),maxdmg/=2,mindmg/=2;break;case"Immume":$("#elembonusdamage").html("This monster is immume versus your <b>ice</b> attack (1 damage only)"),maxdmg=1,mindmg=1;break;default:$("#elembonusdamage").html("This monster has nothing special versus your <b>ice</b> attack (100% damage)")}else if(3==e)switch(poison){case"Weak":$("#elembonusdamage").html("This monster is weak versus your <b>poison</b> attack (150% damage)"),maxdmg*=1.5,mindmg*=1.5;break;case"Strong":$("#elembonusdamage").html("This monster is strong versus your <b>poison</b> attack (50% damage)"),maxdmg/=2,mindmg/=2;break;case"Immume":$("#elembonusdamage").html("This monster is immume versus your <b>poison</b> attack (1 damage only)"),maxdmg=1,mindmg=1;break;default:$("#elembonusdamage").html("This monster has nothing special versus your <b>poison</b> attack (100% damage)")}else if(4==e)switch(holy){case"Weak":$("#elembonusdamage").html("This monster is weak versus your <b>holy</b> attack (150% damage)"),maxdmg*=1.5,mindmg*=1.5;break;case"Strong":$("#elembonusdamage").html("This monster is strong versus your <b>holy</b> attack (50% damage)"),maxdmg/=2,mindmg/=2;break;case"Immume":$("#elembonusdamage").html("This monster is immume versus your <b>holy</b> attack (1 damage only)"),maxdmg=1,mindmg=1;break;default:$("#elembonusdamage").html("This monster has nothing special versus your <b>holy</b> attack (100% damage)")}else if(5==e)switch(lightning){case"Weak":$("#elembonusdamage").html("This monster is weak versus your <b>lightning</b> attack (150% damage)"),maxdmg*=1.5,mindmg*=1.5;break;case"Strong":$("#elembonusdamage").html("This monster is strong versus your <b>lightning</b> attack (50% damage)"),maxdmg/=2,mindmg/=2;break;case"Immume":$("#elembonusdamage").html("This monster is immume versus your <b>lightning</b> attack (1 damage only)"),maxdmg=1,mindmg=1;break;default:$("#elembonusdamage").html("This monster has nothing special versus your <b>lightning</b> attack (100% damage)")}}else $("#elembonusdamage").html("You are not applying any elemental damage")}function generateAdvice(e,a,t){var m,s;0===t?$("#adviceuser").html("<center>nope nope nope nope nope nope nope nope nope nope nope nope nope nope nope nope nope nope nope nope</center><br><br>").append("<center><img alt='nope' style='width:250px; height:240px;' src='http://i.imgur.com/9IsB2Ka.gif'/></center>"):(2>e?(m=monsterlist[t].hp,s=monsterlist[t].hp):(m=Math.ceil(monsterlist[t].hp/e),s=Math.ceil(monsterlist[t].hp/a)),$("#adviceuser").html("You need to hit this monster at least <b>"+m+"</b> time(s) to kill it. (using your minimal damage per hit)<br>However, you probably have to hit it <b>"+s+"</b> time(s) to kill it. (using your average damage per hit)"))}function generateHpWashing(){console.log("skipped the advice")}function hideAll(){$("#stats").hide(),$("#hptarget").hide(),$("#monsterselect").hide(),$("#magicianskills").hide(),$("#archerskills").hide(),$("#healskills").hide(),$("#results").hide(),$("#hpresults").hide(),$(".hp").hide(),$(".mp").hide(),$(".hpclass").hide(),$(".int").hide(),$(".luk").hide(),$(".str").hide(),$(".dex").hide(),$(".acc").hide(),$(".minrange").hide(),$(".maxrange").hide(),$(".totalmagic").hide(),$(".currentaccuracy").show(),$(".damagetype").hide(),$(".damagetype-data").hide()}function resetAll(){var e=void 0;$("#monsterdata").html(""),$("#firevalue").html("-"),$("#icevalue").html("-"),$("#poisonvalue").html("-"),$("#holyvalue").html("-"),$("#lightningvalue").html("-"),$("#elembonusdamage").html(""),$("#mindmg").html("-"),$("#avgdmg").html("-"),$("#maxdmg").html("-"),$("#currentaccuracy").html("-"),$("#maxaccuracy").html("-"),$("#minaccuracy").html("-"),$("#hitratio").html("-"),$("#adviceuser").html("-")}window.onload=function(){$("#calculatevalues").click(function(){calculateIt()}),$("#resetvalues").click(function(){resetAll()}),$(".monsterdata-list").select2({data:monsterlist}),$(".undeadlist-list").select2({data:undeadlist}),$(".jobselect-data").select2({minimumResultsForSearch:1/0,placeholder:"Choose"}),$(".skillmastery").select2({minimumResultsForSearch:1/0}),$(".elementamp").select2({minimumResultsForSearch:1/0}),$(".elemwandbonus").select2({minimumResultsForSearch:1/0}),$(".damagetype-data").select2({minimumResultsForSearch:1/0}),$(".heallevel").select2({minimumResultsForSearch:1/0}),$(".monsteramount").select2({minimumResultsForSearch:1/0}),$(".hpclass-data").select2({minimumResultsForSearch:1/0}),$(".dataset").select2({minimumResultsForSearch:1/0})},hideAll(),$("#jobselect").change(function(){var e=$("#jobselect").val();switch(e){case"1":hideAll(),$("#stats").show(),$(".str").show(),$(".dex").show(),$(".acc").show(),$(".minrange").show(),$(".maxrange").show(),$("#monsterselect").show(),$(".damagetype").show();break;case"2":hideAll(),$("#stats").show(),$(".str").show(),$(".dex").show(),$(".acc").show(),$(".minrange").show(),$(".maxrange").show(),$("#archerskills").show(),$("#monsterselect").show(),$(".damagetype").show();break;case"3":hideAll(),$("#stats").show(),$(".luk").show(),$(".dex").show(),$(".str").show(),$(".acc").show(),$(".minrange").show(),$(".maxrange").show(),$(".damagetype").show(),$("#monsterselect").show();break;case"4":hideAll(),$("#stats").show(),$(".str").show(),$(".dex").show(),$(".acc").show(),$(".minrange").show(),$(".maxrange").show(),$("#monsterselect").show(),$(".damagetype").show();break;case"5":hideAll(),$("#stats").show(),$(".int").show(),$(".luk").show(),$(".totalmagic").show(),$("#magicianskills").show(),$("#monsterselect").show(),$(".damagetype").show();break;case"6":hideAll(),$("#stats").show(),$(".int").show(),$(".luk").show(),$(".totalmagic").show(),$("#healskills").show();break;case"9":hideAll(),$("#stats").show(),$(".hp").show(),$(".mp").show(),$(".hpclass").show(),$("#hptarget").show();break;default:hideAll()}});var multiply,maxdmg,mindmg,avgdmg,elemwandbonus,elementamp,skillmastery,skillattack,acc,totalmagic,totalint,totalluk,totalstr,totaldex,fire,ice,poison,holy,lightning;